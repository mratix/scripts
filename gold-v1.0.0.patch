diff -u backup_blockchain_truenas.sh backup_blockchain_truenas.sh
--- backup_blockchain_truenas.sh	2026-02-02 18:41:00.000000000 +0100
+++ backup_blockchain_truenas.sh	2026-02-03 23:59:00.000000000 +0100
@@ -1,5 +1,15 @@
 #!/bin/bash
 
+# ============================================================
+# Gold Release v1.0.0
+# Backup & restore script for blockchain nodes on TrueNAS
+# Supports: bitcoind, monerod, chia
+#
+# Original author: mratix
+# Refactor & extensions: ChatGPT
+# ============================================================
+
+set -Eeuo pipefail
+
 ########################################
 # Global defaults
 ########################################
@@ -41,6 +51,9 @@
 LOGFILE="${SCLOGFILE:-/var/log/backup_blockchain_truenas.log}"
 
+# Minimal state / audit file
+STATEFILE="/var/log/backup_blockchain_truenas.state"
+
 ########################################
 # Logging helpers
 ########################################
@@ -62,6 +75,24 @@
     exit 1
 }
 
+state_set() {
+    local key="$1" value="$2"
+    if grep -q "^${key}=" "$STATEFILE" 2>/dev/null; then
+        sed -i "s|^${key}=.*|${key}=${value}|" "$STATEFILE"
+    else
+        echo "${key}=${value}" >>"$STATEFILE"
+    fi
+}
+
 ########################################
 # Prepare environment
 ########################################
 prepare() {
     log "prepare(): start"
+
+    [ -d "$SRCDIR" ] || fatal "Source directory not found: $SRCDIR"
+    mkdir -p "$DESTDIR" || fatal "Failed to create destination: $DESTDIR"
+
     log "prepare(): done"
 }
 
@@ -86,7 +117,7 @@
 take_snapshot() {
-    local snapname="script-$(date +%Y-%m-%d_%H-%M)"
+    local snapname="backup-$(date +%Y-%m-%d_%H-%M-%S)"
 
     log "Creating snapshot ${POOL}/${DATASET}@${snapname}"
     zfs snapshot -r "${POOL}/${DATASET}@${snapname}" \
@@ -109,6 +140,7 @@
 restore_blockchain() {
+    [ "$FORCE" = true ] || fatal "Restore requires --force"
     log "restore_blockchain(): start"
     rsync $RSYNC_OPTS "${DESTDIR}/" "${SRCDIR}/" || fatal "Restore failed"
     log "restore_blockchain(): done"
@@ -116,6 +148,25 @@
 
 ########################################
 # Main
 ########################################
+START_TS=$(date +%s)
 log "Script started (mode=${MODE}, service=${SERVICE})"
 
 case "$MODE" in
@@ -129,6 +180,17 @@
         ;;
 esac
 
+END_TS=$(date +%s)
+RUNTIME=$((END_TS - START_TS))
+
+DISKUSAGE="$(du -shL "$SRCDIR" 2>/dev/null | awk '{print $1}')"
+
+state_set last_run_service "$SERVICE"
+state_set last_run_mode "$MODE"
+state_set last_run_runtime_sec "$RUNTIME"
+state_set last_run_diskusage "$DISKUSAGE"
+
 log "Script finished successfully"
 exit 0
